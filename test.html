{% extends "unfold/layouts/base.html" %}

{% block head %}
    <!-- Thêm link font Inter từ Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
    <div class="container mx-auto p-4 flex flex-col justify-between h-screen font-sans bg-gray-100 dark:bg-gray-900 dark:text-white">
        <!-- Vùng hiển thị phản hồi của ChatGPT -->
        <div id="chat-output" class="mt-6 border-t pt-4 flex-1 overflow-auto max-h-[70vh] p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md">
            <div class="chat-message mb-4 flex items-start justify-start">
                <!-- Thay thế tên ChatGPT bằng hình ảnh -->
                {% load static %}
                <img src="{% static 'logo/chat-pka.png' %}" alt="ChatGPT" class="w-6 h-6 inline-block mr-2">
                <p class="text-gray-700 dark:text-gray-300 text-base font-inter">Hi! Try asking me a question.</p>
            </div>
        </div>

        <!-- Form nhập liệu và nút gửi -->
        <div class="relative flex justify-center mb-4 mt-6">
            <!-- <textarea id="user-input" class="w-full max-w-lg p-3 border-2 border-indigo-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400 dark:bg-gray-700 dark:text-white text-base font-inter" rows="3" placeholder="ChatGPT Message..."></textarea> -->
            <!-- <textarea id="user-input" class="w-full max-w-lg p-3 border-2 border-indigo-500 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400 dark:bg-gray-700 dark:text-white text-base font-inter" rows="3" placeholder="ChatGPT Message..."></textarea> -->
            <textarea id="user-input" class="w-full max-w-lg p-3 border-2 border-indigo-500 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-400 placeholder-gray-400 dark:bg-gray-700 dark:text-white text-base font-inter" rows="3" placeholder="ChatGPT Message..."></textarea>

            <!-- Nút gửi với biểu tượng -->
            <button id="send-button" class="absolute bottom-4 right-4 bg-indigo-600 hover:bg-indigo-700 text-white p-3 rounded-full focus:outline-none transition duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <!-- Đổi mũi tên hướng phải sang mũi tên hướng trái -->
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12l-14-7 4 7-4 7 14-7z"></path>
                </svg>
            </button>
        </div>
    </div>

    <script>
        document.getElementById('send-button').addEventListener('click', function() {
            const userInput = document.getElementById('user-input').value;
            if (userInput) {
                const chatOutput = document.getElementById('chat-output');
                const newMessage = document.createElement('div');
                newMessage.classList.add('chat-message', 'mb-4', 'flex', 'items-start', 'justify-end'); // Căn phải cho người dùng
                newMessage.innerHTML = `<strong class="text-blue-600 dark:text-blue-400"></strong><p class="text-gray-800 dark:text-gray-200 text-base font-inter">${userInput}</p>`;
                chatOutput.appendChild(newMessage);
                document.getElementById('user-input').value = ''; // Xóa input sau khi gửi
                // Phản hồi từ ChatGPT (Giả lập)
                setTimeout(() => {
                    const botMessage = document.createElement('div');
                    botMessage.classList.add('chat-message', 'mb-4', 'flex', 'items-start', 'justify-start'); // Căn trái cho ChatGPT
                    botMessage.innerHTML = `<img src="{% static 'logo/chat-pka.png' %}" alt="ChatGPT" class="w-6 h-6 inline-block mr-2"><strong class="text-indigo-600 dark:text-indigo-300"></strong><p class="text-gray-700 dark:text-gray-300 text-base font-inter">This is a sample answer!</p>`;
                    chatOutput.appendChild(botMessage);
                    chatOutput.scrollTop = chatOutput.scrollHeight; // Tự động cuộn xuống cuối
                }, 1000); // Giả lập thời gian phản hồi
            }
        });
    </script>
{% endblock %}
